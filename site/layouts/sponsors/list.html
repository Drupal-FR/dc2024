{{ define "main" }}

{{ partial "jumbotron" (dict "imageUrl" .Params.image "title" .Title "subtitle" .Params.subtitle "credits" .Params.credits) }}

<main class="main-content">
  {{ .Content }}
  {{ $sponsors_individuals := .Params.sponsors_individuals }}
  {{ $sponsoring_types := dict
  "01_gold" "Formule Complète"
  "02_silver" "Formule Galette saucisse"
  "03_bronze" "Formule Beurre sucre"
  }}
  {{ $sponsors_all := where .Site.RegularPages "Type" "sponsors" }}
  {{ $sponsors_all := $sponsors_all | intersect (where .Site.RegularPages "Params.draft" "eq" false) }}
  {{ $sponsors_all := $sponsors_all | intersect (where .Site.RegularPages "Params.sponsor_type" "in" (slice "01_gold" "02_silver" "03_bronze")) }}

  {{ with $sponsors_all }}
    <div class="sponsors-collection-full">
      {{ range $sponsor_type_machine_name, $sponsor_type_label := $sponsoring_types }}
      {{ $type_filtered := where $sponsors_all "Params.sponsor_type" $sponsor_type_machine_name }}
      {{ $sponsors := $type_filtered | intersect $sponsors_all | shuffle }}
      {{ if $sponsors }}
      <h3 class="sponsors-collection-full__label">{{ $sponsor_type_label }}</h3>
      <ul class="sponsors-collection-full__level_wrapper sponsor-level-collection site-extra__sponsors-type-items--{{$sponsor_type_machine_name}}">
        {{ range $sponsors }}
        {{ $image := .Resources.Get .Params.sponsor_logo }}
        <li class="sponsor-level-collection__entry">{{ partial "sponsor-logo" (dict "sponsor" .Params "sponsor_link" .RelPermalink "logo_image" $image "logo_size" "maximize") }}</li>
        {{ end }}
      </ul>
      {{ end }}
      {{ end }}
      {{ with $sponsors_individuals }}
        <h3 class="sponsors-collection-full__label">Sponsors individuels</h3>
        <div class="sponsors-collection-full__level_wrapper sponsor-level-collection site-extra__sponsors-type-items--special">
          <p>
            Merci à nos sponsors individuels qui ont fait un don à l'association lors de l'<a href="/billetterie">achat de leur billet</a> :<br />
          </p>
          <p>
            {{ $sponsors_individuals }}
          </p>
        </div>
      {{ end }}
      <h3 class="sponsors-collection-full__label">Sponsor spécial</h3>
      <div class="sponsors-collection-full__level_wrapper sponsor-level-collection site-extra__sponsors-type-items--special">
        <a href="https://drupal.fr" title="Accéder au site de l'association Drupal France et francophonie"><img src="/img/logo_dfr_black.png" alt="Association Drupal France et francophonie" /></a>
      </div>
      <div class="sponsors-collection-full__level_wrapper sponsor-level-collection site-extra__sponsors-type-items--special">
        <a href="https://drupal.fr" title="Accéder au site de la DrupalCon de Barcelone"><img src="/img/logo_dc_barcelone.svg" alt="DrupalCon Barcelone" /></a>
      </div>
      <h3 class="sponsors-collection-full__label">Sponsor média</h3>
      <div class="sponsors-collection-full__level_wrapper sponsor-level-collection site-extra__sponsors-type-items--special">
        <a href="https://www.thedroptimes.com/" title="Accéder au site anglais The Drop Times"><img src="/img/logo_droptimes.png" alt="The Drop Times" /></a>
      </div>
    </div>
  {{ end }}

  {{ partial "cta" (dict "title" "Soutenez l'événement" "description" "Vous êtes une structure et souhaitez soutenir l'organisation de l'événement ? Nous avons besoin de sponsors et vous pouvez aider le Drupalcamp de plusieurs façons. Découvrez le tarif des formules et les contreparties associées." "link_url" "/sponsors/grille" "link_label" "Découvrir les formules" "link_title" "Découvrir les différentes formules de soutien financier") }}
</main>
{{end}}
